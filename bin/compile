#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

echo "-----> Installing DarkNet"

# change to the the BUILD_DIR ($1)
cd $1

# download the binary (-O) silently (-s)
# curl https://bitbucket.org/emaknyus/darknet_heroku_small/raw/1f3f1654ee0243c1b4c2e94aecf336ce5946e184/darknet_heroku_small.tar.gz -s -O
curl https://bitbucket.org/emaknyus/heroku_cbir_7_10_2017/raw/1e267fae148b50448440d7c906269578a3ca3a9e/archive.tar.gz -s -O

# make a directory to untar (like unzip) the binary
mkdir -p vendor/darknet

# untar the binary to the directory we want
# tar -C vendor/darknet -xvf darknet_heroku_small.tar.gz
tar -C vendor/darknet -xvf archive.tar.gz

# delete tmp
rm -rf archive.tar.gz
